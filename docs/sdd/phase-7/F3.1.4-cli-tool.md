# F3.1.4 - CLI Tool

## Overview

Node.js command-line interface for managing SpecTree specifications from the terminal. Built with `commander.js` for command parsing and TypeScript for type safety.

## Architecture

```
CLI/
  src/
    index.ts           # Entry point, registers all commands
    types.ts           # Shared TypeScript types
    config.ts          # .spectreerc config file management
    formatters.ts      # Output formatters (JSON, YAML, Markdown, CSV)
    commands/
      init.ts          # Project initialization
      spec.ts          # CRUD operations on specifications
      export.ts        # Bulk export with format selection
      sync.ts          # Bidirectional sync with remote
      watch.ts         # File system watcher for live development
      completion.ts    # Shell completion scripts (bash, zsh, fish)
```

## Commands

| Command | Description |
|---------|-------------|
| `spectree init` | Initialize a new project with `.spectreerc` |
| `spectree spec list` | List specifications with filters |
| `spectree spec get <id>` | View a single specification |
| `spectree spec create` | Create a new specification |
| `spectree spec update <id>` | Update an existing specification |
| `spectree spec delete <id>` | Delete a specification |
| `spectree export` | Export specs in JSON, YAML, Markdown, or CSV |
| `spectree sync` | Push/pull sync with remote instance |
| `spectree watch` | Watch directory for spec file changes |
| `spectree completion bash\|zsh\|fish` | Generate shell completions |

## Configuration

The CLI reads `.spectreerc` (JSON) from the project root or home directory:

```json
{
  "apiKey": "sk_live_...",
  "apiUrl": "https://api.spectree.dev/v1",
  "defaultFormat": "json",
  "projectName": "my-project",
  "outputDir": "./specs"
}
```

## Output Formats

- **JSON**: Standard JSON with optional pretty-printing
- **YAML**: Custom serializer (no external dependencies)
- **Markdown**: Headers mapped to node types (# Epic, ## Feature, ### User Story, #### Task)
- **CSV**: RFC-compliant with proper field escaping

## Integration Points

- Uses REST API (F3.1.1) for all remote operations
- API key authentication via Bearer token
- Pagination support for large spec collections

## Test Coverage

- 106 tests across 3 test files
- Config management: 23 tests
- Formatters: 47 tests
- Command structure: 36 tests
