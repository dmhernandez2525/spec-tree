# F8.1 - E2E Test Suite

## Overview

Comprehensive Playwright end-to-end test suite covering all core user flows, accessibility, and performance benchmarks across Chrome, Firefox, and Safari.

## Architecture

```
Client/e2e/
  playwright.config.ts         # Multi-browser config with CI settings
  fixtures/
    users.ts                   # User factory functions (admin, editor, viewer)
    specifications.ts          # Spec hierarchy factories (epic > feature > story > task)
    teams.ts                   # Organization and workspace factories
  utils/
    test-helpers.ts            # Route interception, a11y checks, perf measurement
  tests/
    auth.spec.ts               # Authentication flows (6 tests)
    specification-crud.spec.ts # Create, read, update, delete specs (8 tests)
    export.spec.ts             # Export to Markdown, JSON, Cursor, Copilot, Devin (6 tests)
    ai-generation.spec.ts      # AI generation flows with mock responses (5 tests)
    collaboration.spec.ts      # Team features, comments, workspaces (5 tests)
    accessibility.spec.ts      # WCAG compliance, keyboard nav, screen readers (6 tests)
    performance.spec.ts        # Load times, render benchmarks (5 tests)
```

## Test Coverage

| Suite | Tests | Focus |
|-------|-------|-------|
| Authentication | 6 | Sign-in, sign-up, redirect, demo mode, sign-out |
| Specification CRUD | 8 | Create/edit/delete epics, features, stories, tasks |
| Export | 6 | Markdown, JSON, Cursor, Copilot, Devin, clipboard |
| AI Generation | 5 | Generate, loading states, error handling, model selection |
| Collaboration | 5 | Mode indicator, activity feed, comments, workspaces |
| Accessibility | 6 | WCAG audit, keyboard nav, screen reader labels, contrast |
| Performance | 5 | Page load, tree render, export speed, search latency |
| **Total** | **41** | |

## Configuration

- **Retries**: 2 in CI, 0 locally
- **Workers**: 1 in CI, auto locally
- **Screenshots**: On failure only
- **Video**: Retained on failure
- **Trace**: On first retry
- **Cross-browser**: Chromium, Firefox, WebKit

## Key Patterns

- **Route interception**: All API calls mocked via `page.route()` for deterministic behavior
- **Factory functions**: Reusable data generators with auto-incrementing IDs
- **Custom a11y checks**: WCAG-aligned audits via `page.evaluate()` (no external a11y dependency required)
- **Performance timing**: Uses browser Performance API for accurate measurements
